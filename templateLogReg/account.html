<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Account</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!--<script src="../src/functions.js"></script>-->
</head>
<body>
    <div>This is your account</div>
    <div>Enter your number:</div>
    <input type="number" id="value" name="age" placeholder="input desired age"/>
    <button id="send">Установить значение</button>
    <script>
        var button = document.getElementById('send');
        button.addEventListener('click', setValue, false )

        function setValue( event ) {
            event.preventDefault()
            var input = document.getElementById('value');
            console.log( input.value )

            xhr( 'POST', '/age/set', input.value )
        }

        function xhr( method, url, value ) {
            var xhr = new XMLHttpRequest();
            xhr.open( method, url, true );
            xhr.setRequestHeader('Content-type', 'application/json; charset=utf-8');

            if( method === 'POST' ) {
                var body = JSON.stringify({age: value})
                xhr.send(body);
            }
            else
                xhr.send();

            xhr.onreadystatechange = function() {
                if( xhr.readyState !== 4 ) {
                    return
                }

                if ( xhr.status !== 200 ) {
                    alert( xhr.status + ': ' + xhr.statusText );
                } else {
                    console.log( xhr.responseText );
                }
            }

        }

    </script>
</body>
</html>